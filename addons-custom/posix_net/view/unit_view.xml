<openerp>
	<data>

		<record id="search_posix_net_unit" model="ir.ui.view">
			<field name="name">posix_net.posix_net_unit</field>
			<field name="model">posix_net.unit</field>
			<field name="arch" type="xml">
				<search string="Search Units">
					<field name="name" filter_domain="[('name','ilike', self)]" />
					<field name="address_id"/>
					<filter string="Inactive" icon="terp-accessories-archiver" domain="[('active','=',False)]" />
					<filter string="No Template" name="is_template" icon="terp-network" domain="[('is_template', '=', False)]"/>
					<group expand='0' string='Group by...'>
						<filter string="Partner" domain="[]" context="{'group_by' : 'address_id'}" />
						<filter string="State" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'state'}" />
					</group>
				</search>
			</field>
		</record>

		<record id="form_posix_net_unit" model="ir.ui.view">
			<field name="name">posix_net.form_posix_net_unit</field>
			<field name="model">posix_net.unit</field>
			<field name="arch" type="xml">
				<form string="Unit" version="7.0">
					<header>
						<button name="do_draft" string="Set to Draft" states="init,valid" icon="gtk-convert" type="object" />
						<button name="do_init" string="Initialize" icon="gtk-go-forward" states="draft" type="object" />
						<button name="do_validate" string="Validate" icon="gtk-go-forward" states="init,valid" type="object" />
						<button name="do_configuration" string="Configure" states="valid" icon="terp-mrp" type="object" />
						<button name="do_label_print" string="Print Label" icon="gtk-print" type="object" />
						<field name="state" widget="statusbar" statusbar_visible="draft,open,paid" />
					</header>
					<sheet>
						<group>
							<group>
								<div class="oe_title" style="width: 100%%">
									<label for="name" class="oe_edit_only" />
									<h1>
										<field name="name" />
									</h1>
									<label for="address_id" class="oe_edit_only" />
									<h2>
										<field name="address_id" />
									</h2>
								</div>
							</group>
							<group>
								<field name="info" type="html" nolabel="1"/>
							</group>	
						</group>
						<group>
							<group>
								<field name="type_id" />
								<field name="domain_id" />
								<field name="partner_id" />
								<field name="group_id" />
							</group>
							<group>
								<field name="active" />
								<field name="is_template" />
								<field name="login" placeholder="Login" />
								<field name="password" placeholder="Password"/>
							</group>
						</group>
						<notebook colspan="4">
							<page string="Interfaces">
								<field name="iface_ids" nolabel="1" context="{ 'unit_view' : 1, 'unit_id' : active_id }" />
							</page>
							<page string="Ports">
								<field name="port_ids" nolabel="1"  context="{ 'unit_view' : 1, 'unit_id' : active_id }" />
							</page>
							<page string="Services">
								<field name="service_ids" nolabel="1" colspan="4" >
									<tree string="Services" editable="bottom">
										<field name="name" />
										<field name="type_id" />
										<field name="iface_ids" widget="many2many_tags" domain="[('unit_id','=',parent.id)]" />
										<field name="enabled" />
									</tree>
								</field>
							</page>
							<page string="VLAN">
								<group col="8">
									<group string="VLAN Port" colspan="5">
										<field name="vlan_port_ids" nolabel="1" context="{ 'unit_view' : 1, 'unit_id' : active_id }">
											<tree string="VLAN Port" editable="bottom" >
												<field name="port_id" domain="[('unit_id', '=', parent.id)]" />
												<field name="vlan_id" context="{'default_unit_id' : parent.id }" domain="[('unit_id', '=', parent.id)]"/>
												<field name="tagged" />
												<field name="pvid" />
											</tree>
											<form version="7.0">
												<group>
													<group>
														<field name="port_id" domain="[('unit_id', '=', parent.id)]"/>
														<field name="vlan_id" context="{'default_unit_id' : parent.id }" domain="[('unit_id', '=', parent.id)]"/>
													</group>
													<group>
														<field name="tagged" />
														<field name="pvid" />
													</group>
												</group>
											</form>
										</field>
									</group>
									<group string="VLAN" colspan="3"> 
										<field name="vlan_ids" nolabel="1" context="{ 'unit_view' : 1, 'unit_id' : active_id }">
											<tree string="VLAN" editable="bottom" >
												<field name="vlan"/>
												<field name="device" />
												<field name="name" />
											</tree>
											<form version="7.0">
												<group>
													<field name="vlan"/>
													<field name="device" />
													<field name="name" />
													<field name="vlan_port_ids" invisible="1"/>												
												</group>
											</form>
										</field>
									</group>
								</group>
							</page>
							<page string="Description">
								<group>
									<group string="Assembly">
										<field name="degrees_horiz" />
										<field name="degrees_vert" />
										<field name="degrees_course" />
									</group>
									<group string="Coordinates">
										<field name="lon" />
										<field name="lat" />
										<field name="height" />
									</group>
									<group>
										<div>
											<field name="description"/>
										</div>	
									</group>
								</group>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>

		<record id="tree_posix_net_unit" model="ir.ui.view">
			<field name="name">posix_net.tree_posix_net_unit</field>
			<field name="model">posix_net.unit</field>
			<field name="arch" type="xml">
				<tree string="Unit">
					<field name="name" />
					<field name="domain_id" />
					<field name="type_id" />
					<field name="address_id" />
					<field name="state" invisible="1"></field>
				</tree>
			</field>
		</record>

		<record id="action_posix_net_unit" model="ir.actions.act_window">
			<field name="name">Unit</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">posix_net.unit</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
			<field name="search_view_id" ref="search_posix_net_unit" />
			<field name="context">{'search_default_is_template' : 1 }</field>
		</record>

		<menuitem id="menu_posix_net_unit" name="Unit" parent="menu_network_config_network_unit" sequence="1" action="action_posix_net_unit" />
	</data>
</openerp>