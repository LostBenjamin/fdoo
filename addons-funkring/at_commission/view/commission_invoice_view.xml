<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
	
		<record id="search_commission_line" model="ir.ui.view">
            <field name="name">at_commission.commission_line</field>
            <field name="model">at_commission.line</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Commission Lines">
                   <group col="4" colspan="4">
                        <filter name="invoiced_id" string="To Invoice" domain="[('invoiced_id','=',False)]" icon="terp-dolar"/>
                        <separator orientation="vertical"/>                         
                        <field name="partner_id"/>
                        <field name="ref" />
                        <field name="sale_partner_id" />
	                    <field name="sale_product_id" /> 
                        <field name="name"/>	                    
	                    <field name="date" />     
	                    <field name="period_id" />
	                    <field name="journal_id" />
                    </group>     
                    <newline/>
                    <group expand="0" string="Group By...">
                        <filter string="Salesman" icon="terp-partner" context="{'group_by' : 'partner_id'}"/>
                        <filter string="Partner" icon="terp-partner" context="{'group_by' : 'sale_partner_id'}"/>
                        <filter string="Product" icon="terp-product" context="{'group_by' : 'sale_product_id'}"/>                        
                        <filter string="Period" icon="terp-calendar" context="{'group_by' : 'period_id'}"/>
                        <filter string="Journal" icon="terp-folder-green" context="{'group_by' : 'journal_id'}"/>
                    </group>
               </search>
            </field>
	</record>
		<record id="form_commission_line" model="ir.ui.view">
            <field name="name">at_commission.form_commission_line</field>
            <field name="model">at_commission.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Commission Line">                	
                	<group col="2" colspan="2" >
                	    <separator string="General" colspan="2" col="2"/>
	                    <field name="date" />
	                    <field name="name" />
	                    <field name="ref" />
	                    <field name="invoice_id"/>
	                    <field name="order_id" />
	                    <field name="partner_id" />
	                    <field name="product_id" string="Invoicing"/>
	                    <field name="journal_id" />
	                    <field name="account_id" />
	                </group>
	                <group col="2" colspan="2" >
	                    <separator string="Sale" colspan="2" col="2"/>	    
	                    <field name="sale_partner_id"/>                
	                    <field name="sale_product_id"/>
	                    <field name="unit_amount" />
	                    <field name="price_sub"/>	                	
	                </group>
	                <group col="2" colspan="2" >
                    <separator string="Commission" colspan="2" col="2" />                    	
	                	<field name="total_commission" />
	                    <field name="amount" />
                	</group>
                </form>
            </field>
        </record>

        <record id="tree_commission_line" model="ir.ui.view">
            <field name="name">at_commission.tree_commission_line</field>
            <field name="model">at_commission.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Commission Lines">
                	<field name="date" />
                	<field name="partner_id" />
                	<field name="ref" />
                	<field name="sale_partner_id" />
                	<field name="sale_product_id" />
                	<field name="name" />
                	<field name="unit_amount" sum="Total unit amount"/>
                	<field name="price_sub" string="Volumne of Amount" sum="Total subtotal"/>
                	<field name="total_commission" string="Commission" sum="Total commissions"/>
                    <field name="amount" sum="Total amount"/>
                	<field name="period_id" />
                    <field name="journal_id" />
                </tree>
            </field>
        </record>
        
        <record id="action_commission_line" model="ir.actions.act_window">
            <field name="name">Commission Line</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">at_commission.line</field>            
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_invoiced_id': 1}</field>
        </record>
				
        <menuitem id="menu_commission_line" name="Commissions" parent="account.menu_finance_periodical_processing_billing" sequence="2"
        		  action="action_commission_line"/>		
	</data>
</openerp>