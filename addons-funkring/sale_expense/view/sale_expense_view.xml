<?xml version="1.0" encoding="UTF-8"?>
<openerp>
	<data>
		<record id="form_sale_order" model="ir.ui.view">
			<field name="name">sale.form_sale_order</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form" />
			<field name="type">form</field>
			<field name="arch" type="xml">
				<page string="Other Information" position="before">

					<page string="Expenses">
						<notebook colspan="4">
							<page string="Supplier">
								<field name="expense_purchase_lines_ids" nolabel="1" colspan="4" attrs="{'readonly' : [('expense_status', '=', 'valid')]}">
									<tree string="Supplier">
										<field name="date" />
										<field name="name" />
										<field name="supplier_id" />
										<field name="journal_id" />
										<field name="product_id" />
										<field name="account_id" />
										<field name="quantity" />
										<field name="price" />
										<field name="amount_total" sum="Sum" />
										<field name="is_invoiced" />
									</tree>
									<form string="Supplier">
										<group col="4" colspan="4">
											<field name="date" colspan="2"/>
											<field name="is_invoiced" colspan="2"/>
											<field name="supplier_id" colspan="2"/>
											<field name="journal_id" colspan="2"/>
											<field name="product_id" on_change="on_change_product(product_id, parent.supplier_id)" colspan="4"/>
											<field name="quantity" colspan="2" />
											<field name="name" colspan="4"/>
											<field name="price" colspan="2"/>
											<field name="account_id" />
										</group>
									</form>
								</field>
							</page>
							<page string="Employees">
								<field name="expense_employee_lines_ids" nolabel="1" attrs="{'readonly' : [('expense_status', '=', 'valid')]}">
									<tree string="Employee">
										<field name="date" />
										<field name="employee_id" />
										<field name="name" />
										<field name="unit_amount" widget="float_time" sum="Total amount"/>
										<field name="is_open" />
									</tree>
									<form string="Employee">
										<group col="6" colspan="6">
											<field name="date" colspan="2"/>
											<field name="employee_id" colspan="2" on_change="on_change_employee(date)"/>
											<field name="unit_amount" widget="float_time" colspan="2" />
											<field name="name" colspan="4"/>
											<field name="is_open" colspan="2"/>
										</group>
									</form>
								</field>
							</page>
						</notebook>
						<group col="15" colspan="4">
							<field name="expense_status" readonly="1" colspan="12"/>
							<button name="do_expense_validate" string="Validate" icon="gtk-go-forward" attrs="{'invisible' : [('expense_status','=', 'valid')]}" type="object" />
							<button name="do_expense_draft" string="Draft" icon="gtk-convert" attrs="{'invisible' : [('expense_status','=', 'draft')]}" type="object"/>
						</group>
					</page>
				</page>
			</field>
		</record>
	</data>
</openerp>