<?xml version="1.0" encoding="utf-8"?>
<openerp>
   <data>
      <record id="view_sale_order_supplier_line" model="ir.ui.view">
         <field name="name">sale.line.supplier.form.inherit</field>
         <field name="model">sale.line.supplier</field>
         <field name="arch" type="xml">
            <tree string="Supplier Details" editable="bottom">
               <field name="partner_id" />
               <field name="price" on_change="on_change_price(price)" />
               <field name="pricelist_price" />
               <field name="send_mail" invisible="1" />
               <field name="selected_supplier" invisible="1" />
               <button name="send_mail_supplier_one" type="object" string="Send E-mail"
                  attrs="{'readonly' : [('send_mail','=',True)]}" />
               <button name="assign_selected_partner" type="object" string="Select Supplier"
                  attrs="{'readonly' : [('selected_supplier','=',True)]}" />
            </tree>
         </field>
      </record>

      <record id="view_sale_order_line" model="ir.ui.view">
         <field name="name">sale.order.form.inherit</field>
         <field name="model">sale.order</field>
         <field name="inherit_id" ref="at_sale.form_sale_order" />
         <field name="arch" type="xml">
            <data>                
                <xpath expr="/form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/tree" position="attributes">
                   <attribute name="editable" />
                </xpath>
                <xpath expr="/form/sheet/notebook/page[@string='Order Lines']/field[@name='order_line']/form/group"
                   position="after">
                   <newline />
                   <group>
                      <separator string="Supplier" colspan="4" attrs="{'invisible' : [('quotation_active','=',False)]}" />
                      <field name="supplier_ids" nolabel="1" colspan="4" attrs="{'invisible' : [('quotation_active','=',False)]}"
                         options="{'reload_on_button': true}" />
                      <field name="quotation_active" invisible="1" />
                      <field name="quotation_all" invisible="1" />
                   </group>
                   <newline />
                   <group colspan="4" col="4">
                      <group colspan="2">
                         <button name="send_mail_supplier" type="object" string="Send E-mail to all Suppliers"
                            colspan="2"
                            attrs="{'invisible' : ['|',('quotation_active','=',False),('quotation_all','=',True)]}"
                            confirm="Do you really want to send email to all suppliers?" />
                      </group>
                   </group>
                </xpath>         
            </data>
         </field>
      </record>
  
      <record id="form_sale_order" model="ir.ui.view">
        <field name="name">sale_purchase_quotation.form_sale_order</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="at_purchase_sale.form_sale_order"/>
        <field name="arch" type="xml">
            <field name="supplier_id" position="after">
                <group colspan="2">
                    <!--
                    <button name="start_quotation" type="object" string="Request Quotations" 
                            colspan="2" attrs="{'invisible' : [('quotation_active','=',True)]}" />
                    -->
                    <button name="start_quotation" type="object" string="Request Quotations"  />
                            
                </group>
            </field>
        </field>
      </record>

   </data>
</openerp>